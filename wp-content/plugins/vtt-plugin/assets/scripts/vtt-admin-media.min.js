!function(t,e){t(document).ready(function(){let e=jQuery("#image"),i=e.find('input[name="image"]'),n=e.find('img[id="img"]');t("#btnAddImage").click(function(e){e.preventDefault();let a;a?a.open():((a=wp.media({title:"Chọn ảnh tại thư viện",button:{text:"Chọn"},multiple:!1})).on("select",function(){let e=a.state().get("selection").first().toJSON();t(i).val(e.url),t(n).attr("src",e.url)}),a.open())}),t("#btnRemoveImage").click(function(){empty(t(i).val())?showNotification("Chưa chọn ảnh.",-1):(t(i).val(""),t(n).attr("src",admin_media.param.defaultImage))}),t("#btnCreate").click(function(){let e=this,i=t('input[name="name"]').val(),n=t("option:selected","[name=type]").val(),a=t('input[name="link"]').val(),o=t('input[name="image"]').val();if(!(empty(i)||empty(n)||empty(o)))return t.ajax({type:"post",dataType:"json",url:vtt_admin_param.url,data:{action:admin_media.create.action,security:admin_media.create.nonce,type:n,name:i,link:a,image:o},beforeSend:function(){t(e).attr("disabled",!0)},success:function(i){1==i.success?(t(e).attr("disabled",!0),showNotification(i.data,0),setTimeout(function(){t("#btnEsc")[0].click()},3e3)):(t(e).attr("disabled",!1),showNotification(i.data,1))},error:function(t,e){console.log("The following error occured "+e)}}),!1;showNotification("Hãy nhập dữ liệu đầy đủ theo dấu *.",-1)}),t("#btnEdit").click(function(){let e=this,i=t('input[name="id"]').val(),n=t('input[name="name"]').val(),a=t("option:selected","[name=type]").val(),o=t('input[name="link"]').val(),c=t('input[name="image"]').val();if(empty(i)&&"0"==i)showNotification("Truyền dữ liệu gặp lỗi",-1);else{if(!(empty(n)||empty(a)||empty(c)))return t.ajax({type:"post",dataType:"json",url:vtt_admin_param.url,data:{action:admin_media.edit.action,security:admin_media.edit.nonce,id:i,type:a,name:n,link:o,image:c},beforeSend:function(){t(e).attr("disabled",!0)},success:function(i){1==i.success?(t(e).attr("disabled",!0),showNotification(i.data,0),setTimeout(function(){t("#btnEsc")[0].click()},3e3)):(t(e).attr("disabled",!1),showNotification(i.data,1))},error:function(t,e){console.log("The following error occured "+e)}}),!1;showNotification("Hãy nhập dữ liệu đầy đủ theo dấu *.",-1)}})})}(jQuery,window);