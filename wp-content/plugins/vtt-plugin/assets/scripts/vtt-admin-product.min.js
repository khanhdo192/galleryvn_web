!function(t,e){t(document).ready(function(){t("#btnAddImage").click(function(e){e.preventDefault();let n;n?n.open():((n=wp.media({title:"Chọn ảnh tại thư viện",button:{text:"Chọn"},multiple:!1})).on("select",function(){let e=n.state().get("selection").first().toJSON(),i="";i+='<figure class="image">',i+='<input type="text" name="image" value="'+e.url+'" hidden />',i+='<img class="img" src="'+e.url+'"/>',i+='<a href="javascript:void(0);" class="vtt-btn btn-outline-danger btn-text btnRemoveImage">Xóa</a>',i+="</figure>",t("#groupImage").append(i)}),n.open())}),t("#groupImage").on("click",".btnRemoveImage",function(){t(this).parents(".image").remove()}),t("#btnCreate").click(function(){let e=this,n=t("option:selected","[name=postId]").val(),i=t('input[name="defaultPrice"]').val(),a=t('input[name="size"]').val(),o=t('input[name="authorName"]').val(),c=t('textarea[name="authorStory"]').val(),s=multipleValues('input[name="image"]'),r=t("option:selected","[name=style]").val(),l=t("option:selected","[name=theme]").val(),u=t("option:selected","[name=material]").val();if(empty(n)||empty(i)||empty(a)||empty(o))showNotification("Hãy nhập dữ liệu đầy đủ theo dấu *.",-1);else{if(0!=n)return t.ajax({type:"post",dataType:"json",url:vtt_admin_param.url,data:{action:admin_product.create.action,security:admin_product.create.nonce,postId:n,defaultPrice:i,size:a,authorName:o,authorStory:c,image:s,style:r,theme:l,material:u},beforeSend:function(){t(e).attr("disabled",!0)},success:function(n){1==n.success?(t(e).attr("disabled",!0),showNotification(n.data,0),setTimeout(function(){t("#btnEsc")[0].click()},2e3)):(t(e).attr("disabled",!1),showNotification(n.data,1))},error:function(t,e){console.log("The following error occured "+e)}}),!1;showNotification("Vui lòng chọn sản phẩm.",-1)}}),t("#btnEdit").click(function(){let e=this,n=t('input[name="id"]').val(),i=t('input[name="name"]').val(),a=t('input[name="slug"]').val(),o=t('input[name="code"]').val(),c=parseInt(t("option:selected","[name=category]").val()),s=parseInt(t('input[name="priceDefault"]').val()),r=parseInt(t('input[name="priceDiscount"]').val()),l=parseInt(t('input[name="quantity"]').val()),u=t('input[name="image"]').val();if(empty(n))showNotification("Id sản phẩm không có.",-1);else if(c<1)showNotification("Chưa chọn danh mục sản phẩm.",-1);else if(empty(i)||empty(a))showNotification("Tên sản phẩm, đường dẫn liên kết chưa nhập.",-1);else{if(!empty(u))return t.ajax({type:"post",dataType:"json",url:hainm_admin_param.url,data:{action:admin_product_edit.action,security:admin_product_edit.nonce,id:n,name:i,slug:a,code:o,taxonomyId:c,priceDefault:s,priceDiscount:r,quantity:l,image:u},beforeSend:function(){t(e).attr("disabled",!0)},success:function(n){1==n.success?(t(e).attr("disabled",!0),showNotification(n.data,0),setTimeout(function(){t("a.hainm-btn-esc")[0].click()},2e3)):(t(e).attr("disabled",!1),showNotification(n.data,1))},error:function(t,e){console.log("The following error occured "+e)}}),!1;showNotification("Ảnh đại diện chưa chọn.",-1)}}),t("#btnUpdate").click(function(){let e=this,n=t('input[name="id"]').val(),i=t('input[name="isBestSeller"]:checked').val(),a=t('input[name="isHome"]:checked').val(),o=multipleValues('input[name="shortDesc"]'),c=multipleValues('input[name="discountDesc"]');if(empty(n))showNotification("Id sản phẩm không có.",-1);else if(empty(i))showNotification("Bán chạy chưa chọn.",-1);else if(empty(i))showNotification("Trang chủ chưa chọn.",-1);else{if(!(o.length>10))return t.ajax({type:"post",dataType:"json",url:hainm_admin_param.url,data:{action:admin_product_update.action,security:admin_product_update.nonce,id:n,isBestSeller:i,isHome:a,shortDesc:o,discountDesc:c},beforeSend:function(){t(e).attr("disabled",!0)},success:function(n){1==n.success?(t(e).attr("disabled",!0),showNotification(n.data,0),setTimeout(function(){t("a.hainm-btn-esc")[0].click()},2e3)):(t(e).attr("disabled",!1),showNotification(n.data,1))},error:function(t,e){console.log("The following error occured "+e)}}),!1;showNotification("Đặc điểm nổi bật giới hạn 10 thông tin.",-1)}}),t(".delProduct").click(function(){let e=!1,n=this;if("undefined"!=showNotice&&(e=showNotice.warn()),e){let e=parseInt(t(n).attr("data-id"));if(e<=0)return void showNotification("Truyền dữ liệu gặp vấn đề.",-1);t.ajax({type:"post",dataType:"json",url:hainm_admin_param.url,data:{action:admin_product_delete.action,security:admin_product_delete.nonce,id:e},beforeSend:function(){t(n).attr("disabled",!0)},success:function(e){1==e.success?(t(n).attr("disabled",!0),showNotification(e.data,0),setTimeout(function(){location.reload()},1500)):(t(n).attr("disabled",!1),showNotification(e.data,1))},error:function(t,e){console.log("The following error occured "+e)}})}return!1}),t("#btnSearch").click(function(){let e=this,n=t('input[name="search"]').val();if(empty(n))showNotification("Nhập tên hoặc mã sản phẩm.",-1);else{if(!(n.length<2))return t.ajax({type:"post",dataType:"json",url:hainm_admin_param.url,data:{action:admin_product_search.action,security:admin_product_search.nonce,search:n},beforeSend:function(){t(e).attr("disabled",!0)},success:function(n){1==n.success?(t(e).attr("disabled",!0),setTimeout(function(){location.href=n.data},500)):(t(e).attr("disabled",!1),showNotification(n.data,1))},error:function(t,e){console.log("The following error occured "+e)}}),!1;showNotification("Nhập lớn hơn 2 ký tự.",-1)}})})}(jQuery,window);